import{o as l,c as m,a as y,t as g,m as v,K as w}from"./vendor.73fa2985.js";import{_ as k}from"./index.90f86d18.js";class C{constructor(t,e){Object.assign(this,{nodes:t,p5:e,currentPoint:{x:0,y:0},initPoint:{x:0,y:0},radius:200}),this.getBounding()}getBounding(){let t=1/0,e=1/0,i=-1/0,n=-1/0;const s=(r,o)=>{r<t&&(t=r),r>i&&(i=r),o<e&&(e=o),o>n&&(n=o)};this.nodes.forEach(r=>{const{x:o,y:a,x1:c,y1:h,x2:u,y2:x}=r;o!==void 0&&a!==void 0&&s(o,a),c!==void 0&&h!==void 0&&s(c,h),u!==void 0&&x!==void 0&&s(u,x)}),Object.assign(this,{minX:t,minY:e,maxX:i,maxY:n})}update(){this.nodes.forEach(t=>{this[t.type]&&this[t.type](t)}),this.p5.mouseIsPressed?this.radius=Math.max(this.radius-10,1):this.radius=Math.min(this.radius+10,200)}M(t){const{x:e,y:i}=t;this.currentPoint={x:e,y:i},this.initPoint={x:e,y:i}}C(t){const{x:e,y:i}=this.currentPoint,{x:n,y:s,x1:r,y1:o,x2:a,y2:c}=t;this.drawBezier(e,i,r,o,a,c,n,s),this.currentPoint={x:n,y:s}}L(t){const{x:e,y:i}=this.currentPoint,{x:n,y:s}=t;this.drawLine(e,i,n,s),this.currentPoint={x:n,y:s}}Z(){const{x:t,y:e}=this.currentPoint,{x:i,y:n}=this.initPoint;this.drawLine(t,e,i,n)}drawBezier(t,e,i,n,s,r,o,a){const{x:c,y:h}=this.aroundCenterPoint(t,e,this.radius),{x:u,y:x}=this.aroundCenterPoint(i,n,this.radius),{x:_,y:p}=this.aroundCenterPoint(s,r,this.radius),{x:P,y:j}=this.aroundCenterPoint(o,a,this.radius);this.p5.bezier(c,h,u,x,_,p,P,j)}drawLine(t,e,i,n){const{x:s,y:r}=this.aroundCenterPoint(t,e,this.radius),{x:o,y:a}=this.aroundCenterPoint(i,n,this.radius);this.p5.line(s,r,o,a)}aroundCenterPoint(t,e,i){const{mouseX:n,mouseY:s}=this.p5,r=this.p5.createVector(n,s),o=this.p5.createVector(t,e),a=o.dist(r);return a<i&&(o.sub(r),o.mult((i-a)/i),t+=o.x,e+=o.y),{x:t,y:e}}}const f=100,b={computed:{project(){const d=this.$route.params.project;return this.$store.state.project.find(t=>t.title===d)}},mounted(){const d=t=>{let e;t.setup=()=>{const i=this.$font.getPath(this.project.title,f,200,100);e=new C(i.commands,t),t.resizeCanvas(e.maxX+f,e.maxY+f),t.background(100),t.noFill()},t.draw=()=>{t.background(0),e&&(t.stroke(255),e.update())},t.windowResized=()=>{t.resizeCanvas(t.windowWidth,t.windowHeight)}};this.instance=new this.$p5(d,this.$refs.canvas)},unmounted(){this.instance.remove()},methods:{blur(){this.$router.push({path:"/"})}}},B={class:"page-project__main"},z={ref:"canvas",class:"page-project__canvas"},I={class:"page-project__note"},$=["href"];function L(d,t,e,i,n,s){return l(),m("div",{class:"page-project",onClick:t[0]||(t[0]=w((...r)=>s.blur&&s.blur(...r),["self"]))},[y("div",B,[y("div",z,null,512),y("div",I,g(s.project.note),1),s.project.link?(l(),m("a",{key:0,class:"page-project__link",href:s.project.link,target:"_blank"},"\u524D\u5F80",8,$)):v("",!0)])])}var X=k(b,[["render",L]]);export{X as default};
